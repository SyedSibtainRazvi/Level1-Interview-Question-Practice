<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Interview Practice</title>
</head>

<body>
    <!-- QUESTION 7-->
    <h3>7) This API link can give two errors, either 404, or 401.
        If the error is 404, show the user 'page not found' and if the error is 401, show the user
        'you are not logged in'. </h3>

    <div id="output-api"></div>

    <script>
        let outputAPI = document.querySelector("#output-api")

        let URL = "https://mystery-api.kushanksriraj.repl.co/get";

        fetch(URL)
            .then(data => {
                console.log(data.status)
                // return data.status;
                if (data.status === 404) {
                    outputAPI.innerText = "Page Not Found";
                } else if (data.status === 401) {
                    outputAPI.innerText = "User Not Logged In";
                } else if (data.status === 200) {
                    outputAPI.innerText = "API is working";
                }
            })
    </script>
    <hr>

    <!-- QUESTION 8-->
    <h3>8) Create a web app, where I input my name, and then I input a password.
        If the password contains the input name in it, show an error message "Password can't have name"
    </h3>

    <input type="text" id="user-name">
    <input type="text" id="user-password">

    <button id="check-password">Check</button>
    <div id="output-password"></div>

    <script>
        let userName = document.querySelector('#user-name');
        let userPass = document.querySelector('#user-password');
        let btnCheck = document.querySelector('#check-password');
        let outputPass = document.querySelector('#output-password');

        btnCheck.addEventListener('click', function validate() {
            if (userPass.value.includes(userName.value)) {
                outputPass.innerText = "Choose another password"
            } else {
                outputPass.innerText = "Password is correct"
            }
        })
    </script>
    <hr>

    <!-- QUESTION 9-->
    <h3>9) Create an Input Element, which shows a display message according to the .Input text with the click of a
        button. If you type</h3>

    <input type="text" id="mentor-name">
    <button id="mentor-discription">Check</button>
    <div id="output-mentor"></div>

    <script>
        let mentorName = document.querySelector("#mentor-name");
        let mentorBtn = document.querySelector("#mentor-discription");
        let outputMentor = document.querySelector("#output-mentor");

        let mentors = ["Tanvi", "Tanay", "Swapnil", "Akansha"];

        let discript = ["She is the best CEO ever!", "He is our FUNNY mentor!", "He helps us CONQUER jobs!",
            "She is our CHEERFUL Interviewer!"
        ];

        mentorBtn.addEventListener('click', () => {
            let name = mentorName.value;
            if (name.toUpperCase() == mentors[0].toUpperCase()) {
                outputMentor.innerText = discript[0]
            } else if (name.toUpperCase() == mentors[1].toUpperCase()) {
                outputMentor.innerText = discript[1]
            } else if (name.toUpperCase() == mentors[2].toUpperCase()) {
                outputMentor.innerText = discript[2]
            } else if (name.toUpperCase() == mentors[3].toUpperCase()) {
                outputMentor.innerText = discript[3]
            } else
                outputMentor.innerText = "Invalid "
        });
    </script>
    <hr>

    <!-- QUESTION 10-->
    <h3>10) Create 2 buttons with text YJHD and ZNMD. At the click of a button, call the given API with the query as
        same as the button text, and display the message you get on the screen.
        Followup: Instead of using calling the fetch function twice in both events(clicking of buttons), enclose it in a
        different function so that it can be used accordingly in both areas.</h3>

    <button id="yjhd">YJHD</button>
    <button id="znmd">ZNMD</button>

    <div id="output-flim"></div>

    <script>
        let yjhdBtn = document.querySelector("#yjhd");
        let znmdBtn = document.querySelector("#znmd");
        let outputFlim = document.querySelector("#output-flim");

        let yjhdValue = yjhdBtn.innerText;
        let znmdValue = znmdBtn.innerText;

        let flimAPI = "https://mock-practice.prakhar10v.repl.co/bollywood?name="

        function clickHandler(flim) {
            fetch(flimAPI + flim)
                .then(res => res.json())
                .then(data => {
                    outputFlim.innerText = data.message
                })
        };

        yjhdBtn.addEventListener('click', () => (clickHandler(yjhdValue)))
        znmdBtn.addEventListener('click', () => (clickHandler(znmdValue)))
    </script>
    <hr>

    <!-- QUESTION 11-->
    <h3>11) You have to create a profit and loss calculator, in which you will make two input sections one will take
        current price and other one will take the cost price and to show result one will click on a button and a message
        will be shown, if there is loss then you just have to show a message with loss amount and similarly for profit
    </h3>

    <input type="text" id="current-price">
    <input type="text" id="cost-price">

    <button id="calculate">Calculate</button>
    <div id="output-calc"></div>

    <script>
        let currentPrice = document.querySelector("#current-price");
        let costPrice = document.querySelector("#cost-price");
        let calculateBtn = document.querySelector("#calculate");
        let outputCalc = document.querySelector("#output-calc");

        function calculateProfitLoss() {
            let currentP = currentPrice.value
            let costP = costPrice.value

            if (Number(currentP) > Number(costP)) {
                let profit = currentP - costP
                outputCalc.innerText = "Your Profit is " + profit
            } else {
                let loss = currentP - costP
                outputCalc.innerText = "Your Loss is " + loss
            }
        }

        calculateBtn.addEventListener("click", calculateProfitLoss)
    </script>
    <hr>

    <!-- QUESTION 12-->
    <h3>12) You will enter a name as input from your app and send this API a request with the name along with it (this
        will be the final URL). And then generate and validate the OTP.</h3>

    <input type="text" id="input-user-otp">
    <button id="otp-button">Generate OTP</button>

    <input type="text" id="validate-otp">
    <button id="validate-button">Validate OTP</button>

    <div id="output-otp"></div>

    <script>
        let userNameOtp = document.querySelector("#input-user-otp");
        let generateOtp = document.querySelector("#otp-button");
        let validateOtp= document.querySelector("#validate-otp");
        let validateBtn= document.querySelector("#validate-button");
        let outputOtp = document.querySelector("#output-otp");

        generateOtp.addEventListener("click", function generateOtp() {
            let urlOtp = "https://otpgenerator.ishanjirety.repl.co/get-otp?name="
            let userNameText = userNameOtp.value;
            let finalUrl = urlOtp + userNameText;
            fetch(finalUrl)
                .then((res) => {
                    console.log(res)
                    return res.json()
                })
                .then((data) => {
                    outputOtp.innerText = data.otp;
                })
        });

            validateBtn.addEventListener('click', ()=> {
                if (outputOtp.innerText === validateOtp.value){
                    outputOtp.innerText = "Success"
                    outputOtp.style.color = "Green"
                } else {
                    outputOtp.innerText = "Fail"
                    outputOtp.style.color = "Red"

                }
            })

    </script>




</body>

</html>